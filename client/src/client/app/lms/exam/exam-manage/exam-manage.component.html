<div class="card card-w-title">
  <h1>{{'Exam manage'|translate}}: {{exam.name}} </h1>
  <p-tabView [style]="{width: '100%', height: '460px'}">
    <p-tabPanel header="{{'Mark'|translate}}" leftIcon="ui-icon-star">
      <div class="ui-g-12 ">
        <p-toolbar>
          <div class="ui-toolbar-group-left ">
            <button pButton type="button " label="{{ 'Mark'|translate}} " class="purple-btn " icon="ui-icon-local-offer" (click)="mark() " [disabled]="!selectedRecord "></button>
          </div>
        </p-toolbar>
        <p-table #scoreTable [value]="markRecords" [paginator]="true " [rows]="10" selectionMode="single" [(selection)]="selectedMarkRecord " [responsive]="true">
          <ng-template pTemplate="header">
            <tr>
              <th [pSortableColumn]="'name'">
                {{'Name'|translate}}
                <p-sortIcon [field]="'name'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'group_id__DESC__'">
                {{'Group'|translate}}
                <p-sortIcon [field]="'group_id__DESC__'"></p-sortIcon>
              </th>
              <th *ngFor="let question of questions">
                {{question.title}}
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-record>
            <tr [pSelectableRow]="record">
              <td>{{record.name}}</td>
              <td>{{record.group_id__DESC__}}</td>
              <td *ngFor="let question of questions">
                {{record[question.question_id]}}
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="summary">
            {{'Total records'|translate}} : {{members?.length}}
          </ng-template>
        </p-table>
      </div>
      <question-marking-dialog></question-marking-dialog>
    </p-tabPanel>
    <p-tabPanel header="{{'Score'|translate}}" leftIcon="ui-icon-star">
      <div class="ui-g-12 ">
        <p-toolbar>
          <div class="ui-toolbar-group-left ">
            <button pButton type="button " label="{{ 'Answer sheet'|translate}} " class="purple-btn " icon="ui-icon-content-paste" (click)="viewAnswerSheet()" [disabled]="!selectedScoreRecord "></button>
          </div>
        </p-toolbar>
        <p-table #scoreTable [value]="scoreRecords" [paginator]="true " [rows]="10" selectionMode="single" [(selection)]="selectedScoreRecord" [responsive]="true " sortField="role">
          <ng-template pTemplate="header">
            <tr>
              <th [pSortableColumn]="'name'">
                {{'Name'|translate}}
                <p-sortIcon [field]="'name'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'etraining_group__DESC__'">
                {{'Group'|translate}}
                <p-sortIcon [field]="'etraining_group__DESC__'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'score'">
                {{'Score'|translate}}
                <p-sortIcon [field]="'score'"></p-sortIcon>
              </th>
              <th [pSortableColumn]="'grade'">
                {{'Grade'|translate}}
                <p-sortIcon [field]="'grade'"></p-sortIcon>
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-record>
            <tr [pSelectableRow]="record">
              <td>{{record.name}}</td>
              <td>{{record.group_id__DESC__}}</td>
              <td>{{record.score}}</td>
              <td>{{record.grade}}</td>
            </tr>
          </ng-template>
          <ng-template pTemplate="summary">
            {{'Total records'|translate}} : {{members?.length}}
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td [attr.colspan]="4">
                {{'No records found'|translate}}
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
      <answer-print-dialog></answer-print-dialog>
    </p-tabPanel>
  </p-tabView>
</div>