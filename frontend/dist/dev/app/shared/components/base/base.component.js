"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var model_api_service_1 = require("../../services/api/model-api.service");
var account_api_service_1 = require("../../services/api/account-api.service");
var file_api_service_1 = require("../../services/api/file-api.service");
var auth_service_1 = require("../../services/auth.service");
var app_event_manager_service_1 = require("../../services/app-event-manager.service");
var messageservice_1 = require("primeng/components/common/messageservice");
var service_locator_1 = require("../../../service.locator");
var api_1 = require("primeng/api");
var core_1 = require("@ngx-translate/core");
var setting_service_1 = require("../../services/setting.service");
var workflow_service_1 = require("../../services/workflow.service");
var lms_profile_service_1 = require("../../services/lms-profile.service");
var BaseComponent = (function () {
    function BaseComponent() {
        var _this = this;
        this.apiService = service_locator_1.ServiceLocator.injector.get(model_api_service_1.ModelAPIService);
        this.fileApiService = service_locator_1.ServiceLocator.injector.get(file_api_service_1.FileAPIService);
        this.appEvent = service_locator_1.ServiceLocator.injector.get(app_event_manager_service_1.AppEventManager);
        this.accApiService = service_locator_1.ServiceLocator.injector.get(account_api_service_1.AccountAPIService);
        this.authService = service_locator_1.ServiceLocator.injector.get(auth_service_1.AuthService);
        this.messageService = service_locator_1.ServiceLocator.injector.get(messageservice_1.MessageService);
        this.confirmationService = service_locator_1.ServiceLocator.injector.get(api_1.ConfirmationService);
        this.translateService = service_locator_1.ServiceLocator.injector.get(core_1.TranslateService);
        this.settingService = service_locator_1.ServiceLocator.injector.get(setting_service_1.SettingService);
        this.workflowService = service_locator_1.ServiceLocator.injector.get(workflow_service_1.WorkflowService);
        this.lmsProfileService = service_locator_1.ServiceLocator.injector.get(lms_profile_service_1.LMSProfileService);
        this.appEvent.onStartHTTP.subscribe(function () {
            _this.loading = true;
        });
        this.appEvent.onFinishHTTP.subscribe(function () {
            _this.loading = false;
        });
    }
    Object.defineProperty(BaseComponent.prototype, "ContextUser", {
        get: function () {
            return this.authService.UserProfile;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseComponent.prototype, "ContextPermission", {
        get: function () {
            return this.authService.UserPermission;
        },
        enumerable: true,
        configurable: true
    });
    BaseComponent.prototype.error = function (msg) {
        this.messageService.add({ severity: 'error', summary: this.translateService.instant('Error'), detail: this.translateService.instant(msg) });
    };
    BaseComponent.prototype.info = function (msg) {
        this.messageService.add({ severity: 'info', summary: this.translateService.instant('Info'), detail: this.translateService.instant(msg) });
    };
    BaseComponent.prototype.success = function (msg) {
        this.messageService.add({ severity: 'success', summary: this.translateService.instant('Success'), detail: this.translateService.instant(msg) });
    };
    BaseComponent.prototype.warn = function (msg) {
        this.messageService.add({ severity: 'warn', summary: this.translateService.instant('Warn'), detail: this.translateService.instant(msg) });
    };
    BaseComponent.prototype.confirm = function (prompt, callback) {
        this.confirmationService.confirm({
            message: this.translateService.instant(prompt),
            accept: function () {
                callback();
            }
        });
    };
    return BaseComponent;
}());
exports.BaseComponent = BaseComponent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9zaGFyZWQvY29tcG9uZW50cy9iYXNlL2Jhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsMEVBQXVFO0FBQ3ZFLDhFQUEyRTtBQUMzRSx3RUFBcUU7QUFDckUsNERBQTBEO0FBQzFELHNGQUEyRTtBQUMzRSwyRUFBMEU7QUFFMUUsNERBQTBEO0FBQzFELG1DQUFrRDtBQUNsRCw0Q0FBdUQ7QUFDdkQsa0VBQWdFO0FBS2hFLG9FQUFrRTtBQUNsRSwwRUFBdUU7QUFFdkU7SUFlQztRQUFBLGlCQW1CQztRQWxCQSxJQUFJLENBQUMsVUFBVSxHQUFHLGdDQUFjLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxtQ0FBZSxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLGNBQWMsR0FBRyxnQ0FBYyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsaUNBQWMsQ0FBQyxDQUFDO1FBQ2xFLElBQUksQ0FBQyxRQUFRLEdBQUcsZ0NBQWMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLDJDQUFlLENBQUMsQ0FBQztRQUM3RCxJQUFJLENBQUMsYUFBYSxHQUFHLGdDQUFjLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyx1Q0FBaUIsQ0FBQyxDQUFDO1FBQ3BFLElBQUksQ0FBQyxXQUFXLEdBQUcsZ0NBQWMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLDBCQUFXLENBQUMsQ0FBQztRQUM1RCxJQUFJLENBQUMsY0FBYyxHQUFHLGdDQUFjLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQywrQkFBYyxDQUFDLENBQUM7UUFDbEUsSUFBSSxDQUFDLG1CQUFtQixHQUFHLGdDQUFjLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyx5QkFBbUIsQ0FBQyxDQUFDO1FBQzVFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQ0FBYyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsdUJBQWdCLENBQUMsQ0FBQztRQUN0RSxJQUFJLENBQUMsY0FBYyxHQUFHLGdDQUFjLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxnQ0FBYyxDQUFDLENBQUM7UUFDbEUsSUFBSSxDQUFDLGVBQWUsR0FBRyxnQ0FBYyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsa0NBQWUsQ0FBQyxDQUFDO1FBQ3BFLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxnQ0FBYyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsdUNBQWlCLENBQUMsQ0FBQztRQUV4RSxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUM7WUFDbkMsS0FBSSxDQUFDLE9BQU8sR0FBSSxJQUFJLENBQUM7UUFDdEIsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUM7WUFDcEMsS0FBSSxDQUFDLE9BQU8sR0FBSSxLQUFLLENBQUM7UUFDdkIsQ0FBQyxDQUFDLENBQUM7SUFDSixDQUFDO0lBRUQsc0JBQUksc0NBQVc7YUFBZjtZQUNDLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUM7UUFDckMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw0Q0FBaUI7YUFBckI7WUFDQyxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDO1FBQ3hDLENBQUM7OztPQUFBO0lBRUQsNkJBQUssR0FBTCxVQUFNLEdBQVU7UUFDZixJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzdJLENBQUM7SUFFRCw0QkFBSSxHQUFKLFVBQUssR0FBVTtRQUNkLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDM0ksQ0FBQztJQUVELCtCQUFPLEdBQVAsVUFBUSxHQUFVO1FBQ2pCLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDakosQ0FBQztJQUVELDRCQUFJLEdBQUosVUFBSyxHQUFVO1FBQ2QsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUMzSSxDQUFDO0lBRUQsK0JBQU8sR0FBUCxVQUFRLE1BQWEsRUFBRSxRQUFpQjtRQUN2QyxJQUFJLENBQUMsbUJBQW1CLENBQUMsT0FBTyxDQUFDO1lBQ3ZCLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztZQUM5QyxNQUFNLEVBQUU7Z0JBQ0osUUFBUSxFQUFFLENBQUM7WUFDZixDQUFDO1NBQ0osQ0FBQyxDQUFDO0lBQ1YsQ0FBQztJQUVGLG9CQUFDO0FBQUQsQ0FyRUEsQUFxRUMsSUFBQTtBQXJFcUIsc0NBQWEiLCJmaWxlIjoiYXBwL3NoYXJlZC9jb21wb25lbnRzL2Jhc2UvYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTW9kZWxBUElTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYXBpL21vZGVsLWFwaS5zZXJ2aWNlJztcbmltcG9ydCB7IEFjY291bnRBUElTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYXBpL2FjY291bnQtYXBpLnNlcnZpY2UnO1xuaW1wb3J0IHsgRmlsZUFQSVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hcGkvZmlsZS1hcGkuc2VydmljZSc7XG5pbXBvcnQgeyBBdXRoU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2F1dGguc2VydmljZSc7XG5pbXBvcnQgeyBBcHBFdmVudE1hbmFnZXIgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hcHAtZXZlbnQtbWFuYWdlci5zZXJ2aWNlJztcbmltcG9ydCB7IE1lc3NhZ2VTZXJ2aWNlIH0gZnJvbSAncHJpbWVuZy9jb21wb25lbnRzL2NvbW1vbi9tZXNzYWdlc2VydmljZSc7XG5pbXBvcnQgeyBBUElDb250ZXh0IH0gZnJvbSAnLi4vLi4vbW9kZWxzL2NvbnRleHQnO1xuaW1wb3J0IHsgU2VydmljZUxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZS5sb2NhdG9yXCI7XG5pbXBvcnQgeyBDb25maXJtYXRpb25TZXJ2aWNlIH0gZnJvbSAncHJpbWVuZy9hcGknO1xuaW1wb3J0IHsgVHJhbnNsYXRlU2VydmljZSB9IGZyb20gJ0BuZ3gtdHJhbnNsYXRlL2NvcmUnO1xuaW1wb3J0IHsgU2V0dGluZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9zZXR0aW5nLnNlcnZpY2UnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcy9SeCc7XG5pbXBvcnQgeyBOb3RpZmljYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL3NlcnZpY2VzL25vdGlmaWNhdGlvbi5zZXJ2aWNlJztcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi8uLi9tb2RlbHMvZWxlYXJuaW5nL3VzZXIubW9kZWwnO1xuaW1wb3J0IHsgUGVybWlzc2lvbiB9IGZyb20gJy4uLy4uL21vZGVscy9lbGVhcm5pbmcvcGVybWlzc2lvbi5tb2RlbCc7XG5pbXBvcnQgeyBXb3JrZmxvd1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy93b3JrZmxvdy5zZXJ2aWNlJztcbmltcG9ydCB7IExNU1Byb2ZpbGVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvbG1zLXByb2ZpbGUuc2VydmljZSc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgQVBJQ29udGV4dCB7XG5cdGFwaVNlcnZpY2U6IE1vZGVsQVBJU2VydmljZTtcblx0YWNjQXBpU2VydmljZTogQWNjb3VudEFQSVNlcnZpY2U7XG5cdGZpbGVBcGlTZXJ2aWNlOiBGaWxlQVBJU2VydmljZTtcblx0YXV0aFNlcnZpY2U6IEF1dGhTZXJ2aWNlO1xuXHRtZXNzYWdlU2VydmljZTogTWVzc2FnZVNlcnZpY2U7XG5cdGNvbmZpcm1hdGlvblNlcnZpY2U6IENvbmZpcm1hdGlvblNlcnZpY2U7XG5cdHRyYW5zbGF0ZVNlcnZpY2U6IFRyYW5zbGF0ZVNlcnZpY2U7XG5cdHNldHRpbmdTZXJ2aWNlOiBTZXR0aW5nU2VydmljZTtcblx0d29ya2Zsb3dTZXJ2aWNlOiBXb3JrZmxvd1NlcnZpY2U7XG5cdGxtc1Byb2ZpbGVTZXJ2aWNlOiBMTVNQcm9maWxlU2VydmljZTtcblx0YXBwRXZlbnQ6IEFwcEV2ZW50TWFuYWdlcjtcblxuXHRsb2FkaW5nOiBib29sZWFuO1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMuYXBpU2VydmljZSA9IFNlcnZpY2VMb2NhdG9yLmluamVjdG9yLmdldChNb2RlbEFQSVNlcnZpY2UpO1xuXHRcdHRoaXMuZmlsZUFwaVNlcnZpY2UgPSBTZXJ2aWNlTG9jYXRvci5pbmplY3Rvci5nZXQoRmlsZUFQSVNlcnZpY2UpO1xuXHRcdHRoaXMuYXBwRXZlbnQgPSBTZXJ2aWNlTG9jYXRvci5pbmplY3Rvci5nZXQoQXBwRXZlbnRNYW5hZ2VyKTtcblx0XHR0aGlzLmFjY0FwaVNlcnZpY2UgPSBTZXJ2aWNlTG9jYXRvci5pbmplY3Rvci5nZXQoQWNjb3VudEFQSVNlcnZpY2UpO1xuXHRcdHRoaXMuYXV0aFNlcnZpY2UgPSBTZXJ2aWNlTG9jYXRvci5pbmplY3Rvci5nZXQoQXV0aFNlcnZpY2UpO1xuXHRcdHRoaXMubWVzc2FnZVNlcnZpY2UgPSBTZXJ2aWNlTG9jYXRvci5pbmplY3Rvci5nZXQoTWVzc2FnZVNlcnZpY2UpO1xuXHRcdHRoaXMuY29uZmlybWF0aW9uU2VydmljZSA9IFNlcnZpY2VMb2NhdG9yLmluamVjdG9yLmdldChDb25maXJtYXRpb25TZXJ2aWNlKTtcblx0XHR0aGlzLnRyYW5zbGF0ZVNlcnZpY2UgPSBTZXJ2aWNlTG9jYXRvci5pbmplY3Rvci5nZXQoVHJhbnNsYXRlU2VydmljZSk7XG5cdFx0dGhpcy5zZXR0aW5nU2VydmljZSA9IFNlcnZpY2VMb2NhdG9yLmluamVjdG9yLmdldChTZXR0aW5nU2VydmljZSk7XG5cdFx0dGhpcy53b3JrZmxvd1NlcnZpY2UgPSBTZXJ2aWNlTG9jYXRvci5pbmplY3Rvci5nZXQoV29ya2Zsb3dTZXJ2aWNlKTtcblx0XHR0aGlzLmxtc1Byb2ZpbGVTZXJ2aWNlID0gU2VydmljZUxvY2F0b3IuaW5qZWN0b3IuZ2V0KExNU1Byb2ZpbGVTZXJ2aWNlKTtcblxuXHRcdHRoaXMuYXBwRXZlbnQub25TdGFydEhUVFAuc3Vic2NyaWJlKCgpPT4ge1xuXHRcdFx0dGhpcy5sb2FkaW5nID0gIHRydWU7XG5cdFx0fSk7XG5cdFx0dGhpcy5hcHBFdmVudC5vbkZpbmlzaEhUVFAuc3Vic2NyaWJlKCgpPT4ge1xuXHRcdFx0dGhpcy5sb2FkaW5nID0gIGZhbHNlO1xuXHRcdH0pO1xuXHR9XG5cblx0Z2V0IENvbnRleHRVc2VyKCk6VXNlciB7XG5cdFx0cmV0dXJuIHRoaXMuYXV0aFNlcnZpY2UuVXNlclByb2ZpbGU7XG5cdH1cblxuXHRnZXQgQ29udGV4dFBlcm1pc3Npb24oKTogUGVybWlzc2lvbiB7XG5cdFx0cmV0dXJuIHRoaXMuYXV0aFNlcnZpY2UuVXNlclBlcm1pc3Npb247XG5cdH1cblxuXHRlcnJvcihtc2c6c3RyaW5nKSB7XG5cdFx0dGhpcy5tZXNzYWdlU2VydmljZS5hZGQoeyBzZXZlcml0eTogJ2Vycm9yJywgc3VtbWFyeTogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ0Vycm9yJyksIGRldGFpbDogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQobXNnKSB9KTtcblx0fVxuXG5cdGluZm8obXNnOnN0cmluZykge1xuXHRcdHRoaXMubWVzc2FnZVNlcnZpY2UuYWRkKHsgc2V2ZXJpdHk6ICdpbmZvJywgc3VtbWFyeTogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ0luZm8nKSwgZGV0YWlsOiB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudChtc2cpIH0pO1xuXHR9XG5cblx0c3VjY2Vzcyhtc2c6c3RyaW5nKSB7XG5cdFx0dGhpcy5tZXNzYWdlU2VydmljZS5hZGQoeyBzZXZlcml0eTogJ3N1Y2Nlc3MnLCBzdW1tYXJ5OiB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnU3VjY2VzcycpLCBkZXRhaWw6IHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KG1zZykgfSk7XG5cdH1cblxuXHR3YXJuKG1zZzpzdHJpbmcpIHtcblx0XHR0aGlzLm1lc3NhZ2VTZXJ2aWNlLmFkZCh7IHNldmVyaXR5OiAnd2FybicsIHN1bW1hcnk6IHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdXYXJuJyksIGRldGFpbDogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQobXNnKSB9KTtcblx0fVxuXG5cdGNvbmZpcm0ocHJvbXB0OnN0cmluZywgY2FsbGJhY2s6KCk9PiBhbnkpIHtcblx0XHR0aGlzLmNvbmZpcm1hdGlvblNlcnZpY2UuY29uZmlybSh7XG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudChwcm9tcHQpLFxuICAgICAgICAgICAgYWNjZXB0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cdH1cblxufVxuIl19
